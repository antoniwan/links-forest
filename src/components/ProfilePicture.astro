---
import type { Theme } from '../data/theme.config';
import { themeConfig } from '../data/theme.config';
import type { Size } from '../config/ui';

interface Props {
  name: string;
  image?: string;
  themeId?: Theme;
  size?: Size;
}

const { name, image, themeId = 'wolf', size = 'md' } = Astro.props;
const theme = themeConfig[themeId];

const sizeClasses = {
  sm: 'w-16 h-16 text-lg',
  md: 'w-32 h-32 text-2xl',
  lg: 'w-48 h-48 text-4xl',
} as const;

const initials = name
  .split(' ')
  .map(word => word[0])
  .join('')
  .toUpperCase()
  .slice(0, 2);

const width = size === 'sm' ? 64 : size === 'md' ? 128 : 192;
const height = size === 'sm' ? 64 : size === 'md' ? 128 : 192;
const baseClass = `${sizeClasses[size]} rounded-full`;
---

<div class="flex items-center justify-center" role="img" aria-label={`Profile picture of ${name}`}>
  {image ? (
    <img
      src={image}
      alt={`Profile picture of ${name}`}
      class={`${baseClass} object-cover`}
      width={width}
      height={height}
      loading="lazy"
    />
  ) : (
    <div
      class={`${baseClass} flex items-center justify-center ${theme.accent} border-2`}
      aria-hidden="true"
    >
      <span class="font-bold">{initials}</span>
    </div>
  )}
</div> 